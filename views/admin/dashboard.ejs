<%- include('../layouts/adminHeader.ejs') %>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    <!-- Bootstrap CDN for styling -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <style>
      .filter-container {
          margin-bottom: 20px;
      }
  
      .chart-container {
          margin-top: 20px;
      }
  </style>

<body>

  <!--start header-->
  <header class="top-header">
  
  </header>
  <!--end top header-->


  <%- include('../layouts/adminPanelSidebar.ejs') %>

  <!--start main wrapper-->
  <main class="main-wrapper">
    <div class="main-content">
      <!--breadcrumb-->
				<div class="page-breadcrumb d-none d-sm-flex align-items-center mb-3">
					<div class="breadcrumb-title pe-3">Dashboard</div>
					<div class="ps-3">
						<nav aria-label="breadcrumb">
							<ol class="breadcrumb mb-0 p-0">
								<li class="breadcrumb-item"><a href="javascript:;"><i class="bx bx-home-alt"></i></a>
								</li>
								<li class="breadcrumb-item active" aria-current="page">Analysis</li>
							</ol>
						</nav>
					</div>
					<div class="ms-auto">
						<div class="btn-group">
							<button type="button" class="btn btn-outline-primary">Settings</button>
							<button type="button" class="btn btn-outline-primary split-bg-primary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown">	<span class="visually-hidden">Toggle Dropdown</span>
							</button>
							<div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-end">	<a class="dropdown-item" href="javascript:;">Action</a>
								<a class="dropdown-item" href="javascript:;">Another action</a>
								<a class="dropdown-item" href="javascript:;">Something else here</a>
								<div class="dropdown-divider"></div>	<a class="dropdown-item" href="javascript:;">Separated link</a>
							</div>
						</div>
					</div>
				</div>
				<!--end breadcrumb-->
     
        <div class="row">
          <div class="col-xxl-8 d-flex align-items-stretch">
            <div class="card w-100 overflow-hidden rounded-4">
              <div class="card-body position-relative p-4">
                <div class="row">
                  <div class="col-12 col-sm-7">
                    <div class="d-flex align-items-center gap-3 mb-5">
                      <img src="/adminHomeAssets/images/avatars/001.png" class="rounded-circle bg-grd-info p-1"  width="60" height="60" alt="user">
                      <div class="">
                        <p class="mb-0 fw-semibold">Welcome back</p>
                        <h4 class="fw-semibold mb-0 fs-4 mb-0"><%= adminName %>!</h4>
                      </div>
                    </div>
                    <div class="d-flex align-items-center gap-5">
                      <div class="">
                        <h4 class="mb-1 fw-semibold d-flex align-content-center">$65.4K<i class="ti ti-arrow-up-right fs-5 lh-base text-success"></i>
                        </h4>
                        <p class="mb-3">Today's Sales</p>
                        <div class="progress mb-0" style="height:5px;">
                          <div class="progress-bar bg-grd-success" role="progressbar" style="width: 60%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                      </div>
                      <div class="vr"></div>
                      <div class="">
                        <h4 class="mb-1 fw-semibold d-flex align-content-center">78.4%<i class="ti ti-arrow-up-right fs-5 lh-base text-success"></i>
                        </h4>
                        <p class="mb-3">Growth Rate</p>
                        <div class="progress mb-0" style="height:5px;">
                          <div class="progress-bar bg-grd-danger" role="progressbar" style="width: 60%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12 col-sm-5">
                    <div class="welcome-back-img pt-4">
                       <img src="/adminHomeAssets/images/gallery/welcome-back-034.png" height="180" alt="">
                    </div>
                  </div>
                </div><!--end row-->
              </div>
            </div>
          </div>
          <div class="col-xl-6 col-xxl-2 d-flex align-items-stretch">
            <div class="card w-100 rounded-4">
              <div class="card-body">
                <div class="d-flex align-items-start justify-content-between mb-1">
                  <div class="">
                    <h5 class="mb-0">42.5K</h5>
                    <p class="mb-0">Active Users</p>
                  </div>
                  <div class="dropdown">
                    <a href="javascript:;" class="dropdown-toggle-nocaret options dropdown-toggle"
                      data-bs-toggle="dropdown">
                      <span class="material-icons-outlined fs-5">more_vert</span>
                    </a>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="javascript:;">Action</a></li>
                      <li><a class="dropdown-item" href="javascript:;">Another action</a></li>
                      <li><a class="dropdown-item" href="javascript:;">Something else here</a></li>
                    </ul>
                  </div>
                </div>
                <div class="chart-container2">
                  <div id="chart1"></div>
                </div>
                <div class="text-center">
                  <p class="mb-0 font-12">24K users increased from last month</p>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-6 col-xxl-2 d-flex align-items-stretch">
            <div class="card w-100 rounded-4">
              <div class="card-body">
                <div class="d-flex align-items-start justify-content-between mb-3">
                  <div class="">
                    <h5 class="mb-0">97.4K</h5>
                    <p class="mb-0">Total Users</p>
                  </div>
                  <div class="dropdown">
                    <a href="javascript:;" class="dropdown-toggle-nocaret options dropdown-toggle"
                      data-bs-toggle="dropdown">
                      <span class="material-icons-outlined fs-5">more_vert</span>
                    </a>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="javascript:;">Action</a></li>
                      <li><a class="dropdown-item" href="javascript:;">Another action</a></li>
                      <li><a class="dropdown-item" href="javascript:;">Something else here</a></li>
                    </ul>
                  </div>
                </div>
                <div class="chart-container2">
                  <div id="chart2"></div>
                </div>
                <div class="text-center">
                  <p class="mb-0 font-12"><span class="text-success me-1">12.5%</span> from last month</p>
                </div>
              </div>
            </div>
          </div>
           
          <!-- chart -->
          <div class="col-12 mt-4">
            <div class="card w-100 rounded-4">
                <div class="card-body">
                    <h4 class="fw-semibold mb-4">Sales Report</h4>
        
                    <!-- Filter options -->
                    <div class="filter-container">
                        <label for="filter">Select Filter: </label>
                        <select id="filter" onchange="updateChart()">
                            <option value="yearly">Yearly</option>
                            <option value="monthly">Monthly</option>
                            <option value="weekly">Weekly</option>
                            <option value="daily">Custom Date</option> <!-- Added Daily option -->
                        </select>
                    </div>
        
                    <!-- Custom Date Range Picker for Daily Filter -->
                    <div class="date-range-container" id="dateRangeContainer" style="display:none; margin-top: 10px;">
                        <label for="startDate">Start Date: </label>
                        <input type="date" id="startDate" onchange="updateChart()">
                        <label for="endDate">End Date: </label>
                        <input type="date" id="endDate" onchange="updateChart()">
                    </div>
        
                    <!-- Chart Container -->
                    <div class="chart-container">
                        <canvas id="myChart" style="width:100%;max-width:700px"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- topp producttttttsssssssss -->
        <!-- Top Products Table -->
<div class="col-12 mt-4">
  <div class="card w-100 rounded-4">
    <div class="card-body">
      <h4 class="fw-semibold mb-4">Best Selling Products (Top 10)</h4>
      <div class="table-responsive">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>#</th>
              <th>Product Name</th>
              <th>Brand</th>
              <th>Category</th>
              <th>Price</th>
              <th>Units Sold</th>
            </tr>
          </thead>
          <tbody id="product-table-body">
            <!-- Table rows will be dynamically populated here -->
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Top Categories Table -->
<div class="col-12 mt-4">
  <div class="card w-100 rounded-4">
    <div class="card-body">
      <h4 class="fw-semibold mb-4">Best Selling Categories (Top 10)</h4>
      <div class="table-responsive">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>#</th>
              <th>Category Name</th>
              <th>Units Sold</th>
            </tr>
          </thead>
          <tbody id="category-table-body">
            <!-- Table rows will be dynamically populated here -->
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Top Brands Table -->
<div class="col-12 mt-4">
  <div class="card w-100 rounded-4">
    <div class="card-body">
      <h4 class="fw-semibold mb-4">Best Selling Brands (Top 10)</h4>
      <div class="table-responsive">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>#</th>
              <th>Brand Name</th>
              <th>Units Sold</th>
            </tr>
          </thead>
          <tbody id="brand-table-body">
            <!-- Table rows will be dynamically populated here -->
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

  </div>
          
          <!-- <div class="col-xl-6 col-xxl-4 d-flex align-items-stretch">
            <div class="card w-100 rounded-4">
              <div class="card-body">
                <div class="text-center">
                  <h6 class="mb-0">Monthly Revenue</h6>
                </div>
                <div class="mt-4" id="chart5"></div>
                <p>Avrage monthly sale for every author</p>
                <div class="d-flex align-items-center gap-3 mt-4">
                  <div class="">
                    <h1 class="mb-0 text-primary">68.9%</h1>
                  </div>
                  <div class="d-flex align-items-center align-self-end">
                    <p class="mb-0 text-success">34.5%</p>
                    <span class="material-icons-outlined text-success">expand_less</span>
                  </div>
                </div>
              </div>
            </div>
          </div> -->
          <!-- <div class="col-xl-6 col-xxl-4 d-flex align-items-stretch">
            <div class="card w-100 rounded-4">
              <div class="card-body">
                <div class="d-flex flex-column gap-3">
                  <div class="d-flex align-items-start justify-content-between">
                    <div class="">
                      <h5 class="mb-0">Device Type</h5>
                    </div>
                    <div class="dropdown">
                      <a href="javascript:;" class="dropdown-toggle-nocaret options dropdown-toggle"
                        data-bs-toggle="dropdown">
                        <span class="material-icons-outlined fs-5">more_vert</span>
                      </a>
                      <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="javascript:;">Action</a></li>
                        <li><a class="dropdown-item" href="javascript:;">Another action</a></li>
                        <li><a class="dropdown-item" href="javascript:;">Something else here</a></li>
                      </ul>
                    </div>
                  </div>
                  <div class="position-relative">
                    <div class="piechart-legend">
                      <h2 class="mb-1">68%</h2>
                      <h6 class="mb-0">Total Views</h6>
                    </div>
                    <div id="chart6"></div>
                  </div>
                  <div class="d-flex flex-column gap-3">
                    <div class="d-flex align-items-center justify-content-between">
                      <p class="mb-0 d-flex align-items-center gap-2 w-25"><span
                          class="material-icons-outlined fs-6 text-primary">desktop_windows</span>Desktop</p>
                      <div class="">
                        <p class="mb-0">35%</p>
                      </div>
                    </div>
                    <div class="d-flex align-items-center justify-content-between">
                      <p class="mb-0 d-flex align-items-center gap-2 w-25"><span
                          class="material-icons-outlined fs-6 text-danger">tablet_mac</span>Tablet</p>
                      <div class="">
                        <p class="mb-0">48%</p>
                      </div>
                    </div>
                    <div class="d-flex align-items-center justify-content-between">
                      <p class="mb-0 d-flex align-items-center gap-2 w-25"><span
                          class="material-icons-outlined fs-6 text-success">phone_android</span>Mobile</p>
                      <div class="">
                        <p class="mb-0">27%</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div> -->
          <!-- <div class="col-xxl-4">
            <div class="row">
              <div class="col-md-6 d-flex align-items-stretch">
                <div class="card w-100 rounded-4">
                  <div class="card-body">
                    <div class="d-flex align-items-start justify-content-between mb-1">
                      <div class="">
                        <h5 class="mb-0">82.7K</h5>
                        <p class="mb-0">Total Clicks</p>
                      </div>
                      <div class="dropdown">
                        <a href="javascript:;" class="dropdown-toggle-nocaret options dropdown-toggle"
                          data-bs-toggle="dropdown">
                          <span class="material-icons-outlined fs-5">more_vert</span>
                        </a>
                        <ul class="dropdown-menu">
                          <li><a class="dropdown-item" href="javascript:;">Action</a></li>
                          <li><a class="dropdown-item" href="javascript:;">Another action</a></li>
                          <li><a class="dropdown-item" href="javascript:;">Something else here</a></li>
                        </ul>
                      </div>
                    </div>
                    <div class="chart-container2">
                      <div id="chart3"></div>
                    </div>
                    <div class="text-center">
                      <p class="mb-0 font-12"><span class="text-success me-1">12.5%</span> from last month</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 d-flex align-items-stretch">
                <div class="card w-100 rounded-4">
                  <div class="card-body">
                    <div class="d-flex align-items-start justify-content-between mb-1">
                      <div class="">
                        <h5 class="mb-0">68.4K</h5>
                        <p class="mb-0">Total Views</p>
                      </div>
                      <div class="dropdown">
                        <a href="javascript:;" class="dropdown-toggle-nocaret options dropdown-toggle"
                          data-bs-toggle="dropdown">
                          <span class="material-icons-outlined fs-5">more_vert</span>
                        </a>
                        <ul class="dropdown-menu">
                          <li><a class="dropdown-item" href="javascript:;">Action</a></li>
                          <li><a class="dropdown-item" href="javascript:;">Another action</a></li>
                          <li><a class="dropdown-item" href="javascript:;">Something else here</a></li>
                        </ul>
                      </div>
                    </div>
                    <div class="chart-container2">
                      <div id="chart4"></div>
                    </div>
                    <div class="text-center">
                      <p class="mb-0 font-12">35K users increased from last month</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card rounded-4">
              <div class="card-body">
                <div class="d-flex align-items-center gap-3 mb-2">
                  <div class="">
                    <h3 class="mb-0">85,247</h3>
                  </div>
                  <div class="flex-grow-0">
                    <p
                      class="dash-lable d-flex align-items-center gap-1 rounded mb-0 bg-success text-success bg-opacity-10">
                      <span class="material-icons-outlined fs-6">arrow_downward</span>23.7%
                    </p>
                  </div>
                </div>
                <p class="mb-0">Total Accounts</p>
                <div id="chart7"></div>
              </div>
            </div>
          </div> -->
          <!-- <div class="col-xl-6 col-xxl-4 d-flex align-items-stretch">
            <div class="card w-100 rounded-4">
              <div class="card-body">
                <div class="d-flex align-items-start justify-content-between mb-3">
                  <div class="">
                    <h6 class="mb-0 fw-bold">Campaign Stats</h6>
                  </div>
                  <div class="dropdown">
                    <a href="javascript:;" class="dropdown-toggle-nocaret options dropdown-toggle" data-bs-toggle="dropdown">
                      <span class="material-icons-outlined fs-5">more_vert</span>
                    </a>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="javascript:;">Action</a></li>
                      <li><a class="dropdown-item" href="javascript:;">Another action</a></li>
                      <li><a class="dropdown-item" href="javascript:;">Something else here</a></li>
                    </ul>
                  </div>
                 </div>

                  <ul class="list-group list-group-flush">
                      <li class="list-group-item px-0 bg-transparent">
                        <div class="d-flex align-items-center gap-3">
                          <div class="wh-42 d-flex align-items-center justify-content-center rounded-3 bg-grd-primary">
                            <span class="material-icons-outlined text-white">calendar_today</span>
                          </div>
                          <div class="flex-grow-1">
                            <h6 class="mb-0">Campaigns</h6>
                          </div>
                          <div class="d-flex align-items-center gap-3">
                            <p class="mb-0">54</p>
                            <p class="mb-0 fw-bold text-success">28%</p>
                          </div>
                        </div>
                      </li>
                      <li class="list-group-item px-0 bg-transparent">
                        <div class="d-flex align-items-center gap-3">
                          <div class="wh-42 d-flex align-items-center justify-content-center rounded-3 bg-grd-success">
                            <span class="material-icons-outlined text-white">email</span>
                          </div>
                          <div class="flex-grow-1">
                            <h6 class="mb-0">Emailed</h6>
                          </div>
                          <div class="d-flex align-items-center gap-3">
                            <p class="mb-0">245</p>
                            <p class="mb-0 fw-bold text-danger">15%</p>
                          </div>
                        </div>
                      </li>
                      <li class="list-group-item px-0 bg-transparent">
                        <div class="d-flex align-items-center gap-3">
                          <div class="wh-42 d-flex align-items-center justify-content-center rounded-3 bg-grd-branding">
                            <span class="material-icons-outlined text-white">open_in_new</span>
                          </div>
                          <div class="flex-grow-1">
                            <h6 class="mb-0">Opened</h6>
                          </div>
                          <div class="d-flex align-items-center gap-3">
                            <p class="mb-0">54</p>
                            <p class="mb-0 fw-bold text-success">30.5%</p>
                          </div>
                        </div>
                      </li>
                      <li class="list-group-item px-0 bg-transparent">
                        <div class="d-flex align-items-center gap-3">
                          <div class="wh-42 d-flex align-items-center justify-content-center rounded-3 bg-grd-warning">
                            <span class="material-icons-outlined text-white">ads_click</span>
                          </div>
                          <div class="flex-grow-1">
                            <h6 class="mb-0">Clicked</h6>
                          </div>
                          <div class="d-flex align-items-center gap-3">
                            <p class="mb-0">859</p>
                            <p class="mb-0 fw-bold text-danger">34.6%</p>
                          </div>
                        </div>
                      </li>
                      <li class="list-group-item px-0 bg-transparent">
                        <div class="d-flex align-items-center gap-3">
                          <div class="wh-42 d-flex align-items-center justify-content-center rounded-3 bg-grd-info">
                            <span class="material-icons-outlined text-white">subscriptions</span>
                          </div>
                          <div class="flex-grow-1">
                            <h6 class="mb-0">Subscribed</h6>
                          </div>
                          <div class="d-flex align-items-center gap-3">
                            <p class="mb-0">24,758</p>
                            <p class="mb-0 fw-bold text-success">53%</p>
                          </div>
                        </div>
                      </li>
                      <li class="list-group-item px-0 bg-transparent">
                        <div class="d-flex align-items-center gap-3">
                          <div class="wh-42 d-flex align-items-center justify-content-center rounded-3 bg-grd-danger">
                            <span class="material-icons-outlined text-white">inbox</span>
                          </div>
                          <div class="flex-grow-1">
                            <h6 class="mb-0">Spam Message</h6>
                          </div>
                          <div class="d-flex align-items-center gap-3">
                            <p class="mb-0">548</p>
                            <p class="mb-0 fw-bold text-danger">47%</p>
                          </div>
                        </div>
                      </li>
                      <li class="list-group-item px-0 bg-transparent">
                        <div class="d-flex align-items-center gap-3">
                          <div class="wh-42 d-flex align-items-center justify-content-center rounded-3 bg-grd-deep-blue">
                            <span class="material-icons-outlined text-white">visibility</span>
                          </div>
                          <div class="flex-grow-1">
                            <h6 class="mb-0">Views Mails</h6>
                          </div>
                          <div class="d-flex align-items-center gap-3">
                            <p class="mb-0">9845</p>
                            <p class="mb-0 fw-bold text-success">68%</p>
                          </div>
                        </div>
                      </li>
                  </ul>

              </div>
            </div>
          </div> -->
          <!-- <div class="col-xl-6 col-xxl-4 d-flex align-items-stretch">
            <div class="card w-100 rounded-4">
              <div class="card-body">
                <div id="chart8"></div>
                <div class="d-flex align-items-center gap-3 mt-4">
                  <div class="">
                    <h1 class="mb-0">36.7%</h1>
                  </div>
                  <div class="d-flex align-items-center align-self-end gap-2">
                    <span class="material-icons-outlined text-success">trending_up</span>
                    <p class="mb-0 text-success">34.5%</p>
                  </div>
                </div>
                <p class="mb-4">Visitors Growth</p>
                <div class="d-flex flex-column gap-3">
                  <div class="">
                    <p class="mb-1">Cliks <span class="float-end">2589</span></p>
                    <div class="progress" style="height: 5px;">
                      <div class="progress-bar bg-grd-primary" style="width: 65%"></div>
                    </div>
                  </div>
                  <div class="">
                    <p class="mb-1">Likes <span class="float-end">6748</span></p>
                    <div class="progress" style="height: 5px;">
                      <div class="progress-bar bg-grd-warning" style="width: 55%"></div>
                    </div>
                  </div>
                  <div class="">
                    <p class="mb-1">Upvotes <span class="float-end">9842</span></p>
                    <div class="progress" style="height: 5px;">
                      <div class="progress-bar bg-grd-info" style="width: 45%"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div> -->
          <!-- <div class="col-xl-6 col-xxl-4 d-flex align-items-stretch">
            <div class="card w-100 rounded-4">
              <div class="card-body">
                <div class="d-flex align-items-start justify-content-between mb-3">
                  <div class="">
                    <h5 class="mb-0 fw-bold">Social Leads</h5>
                  </div>
                  <div class="dropdown">
                    <a href="javascript:;" class="dropdown-toggle-nocaret options dropdown-toggle"
                      data-bs-toggle="dropdown">
                      <span class="material-icons-outlined fs-5">more_vert</span>
                    </a>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="javascript:;">Action</a></li>
                      <li><a class="dropdown-item" href="javascript:;">Another action</a></li>
                      <li><a class="dropdown-item" href="javascript:;">Something else here</a></li>
                    </ul>
                  </div>
                 </div>
                <div class="d-flex flex-column justify-content-between gap-4">
                  <div class="d-flex align-items-center gap-4">
                    <div class="d-flex align-items-center gap-3 flex-grow-1">
                      <img src="/adminHomeAssets/images/apps/17.png" width="32" alt="">
                      <p class="mb-0">Facebook</p>
                    </div>
                    <div class="">
                      <p class="mb-0 fs-6">55%</p>
                    </div>
                    <div class="">
                      <p class="mb-0 data-attributes">
                        <span
                          data-peity='{ "fill": ["#0d6efd", "rgb(255 255 255 / 10%)"], "innerRadius": 14, "radius": 18 }'>5/7</span>
                      </p>
                    </div>
                  </div>
                  <div class="d-flex align-items-center gap-4">
                    <div class="d-flex align-items-center gap-3 flex-grow-1">
                      <img src="/adminHomeAssets/images/apps/18.png" width="32" alt="">
                      <p class="mb-0">LinkedIn</p>
                    </div>
                    <div class="">
                      <p class="mb-0 fs-6">67%</p>
                    </div>
                    <div class="">
                      <p class="mb-0 data-attributes">
                        <span
                          data-peity='{ "fill": ["#fc185a", "rgb(255 255 255 / 10%)"], "innerRadius": 14, "radius": 18 }'>5/7</span>
                      </p>
                    </div>
                  </div>
                  <div class="d-flex align-items-center gap-4">
                    <div class="d-flex align-items-center gap-3 flex-grow-1">
                      <img src="/adminHomeAssets/images/apps/19.png" width="32" alt="">
                      <p class="mb-0">Instagram</p>
                    </div>
                    <div class="">
                      <p class="mb-0 fs-6">78%</p>
                    </div>
                    <div class="">
                      <p class="mb-0 data-attributes">
                        <span
                          data-peity='{ "fill": ["#02c27a", "rgb(255 255 255 / 10%)"], "innerRadius": 14, "radius": 18 }'>5/7</span>
                      </p>
                    </div>
                  </div>
                  <div class="d-flex align-items-center gap-4">
                    <div class="d-flex align-items-center gap-3 flex-grow-1">
                      <img src="/adminHomeAssets/images/apps/20.png" width="32" alt="">
                      <p class="mb-0">Snapchat</p>
                    </div>
                    <div class="">
                      <p class="mb-0 fs-6">46%</p>
                    </div>
                    <div class="">
                      <p class="mb-0 data-attributes">
                        <span
                          data-peity='{ "fill": ["#fd7e14", "rgb(255 255 255 / 10%)"], "innerRadius": 14, "radius": 18 }'>5/7</span>
                      </p>
                    </div>
                  </div>
                  <div class="d-flex align-items-center gap-4">
                    <div class="d-flex align-items-center gap-3 flex-grow-1">
                      <img src="/adminHomeAssets/images/apps/05.png" width="32" alt="">
                      <p class="mb-0">Google</p>
                    </div>
                    <div class="">
                      <p class="mb-0 fs-6">38%</p>
                    </div>
                    <div class="">
                      <p class="mb-0 data-attributes">
                        <span
                          data-peity='{ "fill": ["#0dcaf0", "rgb(255 255 255 / 10%)"], "innerRadius": 14, "radius": 18 }'>5/7</span>
                      </p>
                    </div>
                  </div>
                  <div class="d-flex align-items-center gap-4">
                    <div class="d-flex align-items-center gap-3 flex-grow-1">
                      <img src="/adminHomeAssets/images/apps/08.png" width="32" alt="">
                      <p class="mb-0">Altaba</p>
                    </div>
                    <div class="">
                      <p class="mb-0 fs-6">15%</p>
                    </div>
                    <div class="">
                      <p class="mb-0 data-attributes">
                        <span
                          data-peity='{ "fill": ["#6f42c1", "rgb(255 255 255 / 10%)"], "innerRadius": 14, "radius": 18 }'>5/7</span>
                      </p>
                    </div>
                  </div>
                  <div class="d-flex align-items-center gap-4">
                    <div class="d-flex align-items-center gap-3 flex-grow-1">
                      <img src="/adminHomeAssets/images/apps/07.png" width="32" alt="">
                      <p class="mb-0">Spotify</p>
                    </div>
                    <div class="">
                      <p class="mb-0 fs-6">12%</p>
                    </div>
                    <div class="">
                      <p class="mb-0 data-attributes">
                        <span
                          data-peity='{ "fill": ["#ff00b3", "rgb(255 255 255 / 10%)"], "innerRadius": 14, "radius": 18 }'>5/7</span>
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>  
          </div> -->
          <!-- <div class="col-xl-6 col-xxl-4 d-flex align-items-stretch">
            <div class="card w-100 rounded-4">
              <div class="card-header border-0 p-3 border-bottom">
                <div class="d-flex align-items-start justify-content-between">
                  <div class="">
                    <h5 class="mb-0">New Users</h5>
                  </div>
                  <div class="dropdown">
                    <a href="javascript:;" class="dropdown-toggle-nocaret options dropdown-toggle" data-bs-toggle="dropdown">
                      <span class="material-icons-outlined fs-5">more_vert</span>
                    </a>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="javascript:;">Action</a></li>
                      <li><a class="dropdown-item" href="javascript:;">Another action</a></li>
                      <li><a class="dropdown-item" href="javascript:;">Something else here</a></li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="card-body p-0">
                <div class="user-list p-3">
                  <div class="d-flex flex-column gap-3">
                    <div class="d-flex align-items-center gap-3">
                      <img src="/adminHomeAssets/images/avatars/01.png" width="45" height="45" class="rounded-circle" alt="">
                      <div class="flex-grow-1">
                        <h6 class="mb-0">Elon Jonado</h6>
                        <p class="mb-0">elon_deo</p>
                      </div>
                      <div class="form-check form-check-inline me-0">
                        <input class="form-check-input ms-0" type="checkbox">
                      </div>
                    </div>
                    <div class="d-flex align-items-center gap-3">
                      <img src="/adminHomeAssets/images/avatars/02.png" width="45" height="45" class="rounded-circle" alt="">
                      <div class="flex-grow-1">
                        <h6 class="mb-0">Alexzender Clito</h6>
                        <p class="mb-0">zli_alexzender</p>
                      </div>
                      <div class="form-check form-check-inline me-0">
                        <input class="form-check-input ms-0" type="checkbox">
                      </div>
                    </div>
                    <div class="d-flex align-items-center gap-3">
                      <img src="/adminHomeAssets/images/avatars/03.png" width="45" height="45" class="rounded-circle" alt="">
                      <div class="flex-grow-1">
                        <h6 class="mb-0">Michle Tinko</h6>
                        <p class="mb-0">tinko_michle</p>
                      </div>
                      <div class="form-check form-check-inline me-0">
                        <input class="form-check-input ms-0" type="checkbox">
                      </div>
                    </div>
                    <div class="d-flex align-items-center gap-3">
                      <img src="/adminHomeAssets/images/avatars/04.png" width="45" height="45" class="rounded-circle" alt="">
                      <div class="flex-grow-1">
                        <h6 class="mb-0">KailWemba</h6>
                        <p class="mb-0">wemba_kl</p>
                      </div>
                      <div class="form-check form-check-inline me-0">
                        <input class="form-check-input ms-0" type="checkbox">
                      </div>
                    </div>
                    <div class="d-flex align-items-center gap-3">
                      <img src="/adminHomeAssets/images/avatars/05.png" width="45" height="45" class="rounded-circle" alt="">
                      <div class="flex-grow-1">
                        <h6 class="mb-0">Henhco Tino</h6>
                        <p class="mb-0">Henhco_tino</p>
                      </div>
                      <div class="form-check form-check-inline me-0">
                        <input class="form-check-input ms-0" type="checkbox">
                      </div>
                    </div>
                    <div class="d-flex align-items-center gap-3">
                      <img src="/adminHomeAssets/images/avatars/06.png" width="45" height="45" class="rounded-circle" alt="">
                      <div class="flex-grow-1">
                        <h6 class="mb-0">Gonjiko Fernando</h6>
                        <p class="mb-0">gonjiko_fernando</p>
                      </div>
                      <div class="form-check form-check-inline me-0">
                        <input class="form-check-input ms-0" type="checkbox">
                      </div>
                    </div>
                    <div class="d-flex align-items-center gap-3">
                      <img src="/adminHomeAssets/images/avatars/08.png" width="45" height="45" class="rounded-circle" alt="">
                      <div class="flex-grow-1">
                        <h6 class="mb-0">Specer Kilo</h6>
                        <p class="mb-0">specer_kilo</p>
                      </div>
                      <div class="form-check form-check-inline me-0">
                        <input class="form-check-input ms-0" type="checkbox">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="card-footer bg-transparent p-3">
                <div class="d-flex align-items-center justify-content-between gap-3">
                  <a href="javascript:;" class="sharelink"><i class="material-icons-outlined">share</i></a>
                  <a href="javascript:;" class="sharelink"><i class="material-icons-outlined">textsms</i></a>
                  <a href="javascript:;" class="sharelink"><i class="material-icons-outlined">email</i></a>
                  <a href="javascript:;" class="sharelink"><i class="material-icons-outlined">attach_file</i></a>
                  <a href="javascript:;" class="sharelink"><i class="material-icons-outlined">event</i></a>
                </div>
              </div>
            </div>
          </div> -->
          <!-- <div class="col-lg-12 col-xxl-8 d-flex align-items-stretch">
            <div class="card w-100 rounded-4">
              <div class="card-body">
               <div class="d-flex align-items-start justify-content-between mb-3">
                  <div class="">
                    <h5 class="mb-0">Recent Orders</h5>
                  </div>
                  <div class="dropdown">
                    <a href="javascript:;" class="dropdown-toggle-nocaret options dropdown-toggle"
                      data-bs-toggle="dropdown">
                      <span class="material-icons-outlined fs-5">more_vert</span>
                    </a>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="javascript:;">Action</a></li>
                      <li><a class="dropdown-item" href="javascript:;">Another action</a></li>
                      <li><a class="dropdown-item" href="javascript:;">Something else here</a></li>
                    </ul>
                  </div>
                </div>
                <div class="order-search position-relative my-3">
                  <input class="form-control rounded-5 px-5" type="text" placeholder="Search">
                  <span class="material-icons-outlined position-absolute ms-3 translate-middle-y start-0 top-50">search</span>
                </div>
                 <div class="table-responsive">
                     <table class="table align-middle">
                       <thead>
                        <tr>
                          <th>Item Name</th>
                          <th>Amount</th>
                          <th>Vendor</th>
                          <th>Status</th>
                          <th>Rating</th>
                        </tr>
                       </thead>
                        <tbody>
                          <tr>
                            <td>
                              <div class="d-flex align-items-center gap-3">
                                 <div class="">
                                    <img src="/adminHomeAssets/images/top-products/01.png" class="rounded-circle" width="50" height="50" alt="">
                                 </div>
                                 <p class="mb-0">Sports Shoes</p>
                              </div>
                            </td>
                            <td>$149</td>
                            <td>Julia Sunota</td>
                            <td><p class="dash-lable mb-0 bg-success bg-opacity-10 text-success rounded-2">Completed</p></td>
                            <td>
                              <div class="d-flex align-items-center gap-1">
                                <p class="mb-0">5.0</p>
                                <i class="material-icons-outlined text-warning fs-6">star</i>
                              </div>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <div class="d-flex align-items-center gap-3">
                                 <div class="">
                                    <img src="/adminHomeAssets/images/top-products/02.png" class="rounded-circle" width="50" height="50" alt="">
                                 </div>
                                 <p class="mb-0">Goldan Watch</p>
                              </div>
                            </td>
                            <td>$168</td>
                            <td>Julia Sunota</td>
                            <td><p class="dash-lable mb-0 bg-success bg-opacity-10 text-success rounded-2">Completed</p></td>
                            <td>
                              <div class="d-flex align-items-center gap-1">
                                <p class="mb-0">5.0</p>
                                <i class="material-icons-outlined text-warning fs-6">star</i>
                              </div>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <div class="d-flex align-items-center gap-3">
                                 <div class="">
                                    <img src="/adminHomeAssets/images/top-products/03.png" class="rounded-circle" width="50" height="50" alt="">
                                 </div>
                                 <p class="mb-0">Men Polo Tshirt</p>
                              </div>
                            </td>
                            <td>$124</td>
                            <td>Julia Sunota</td>
                            <td><p class="dash-lable mb-0 bg-warning bg-opacity-10 text-warning rounded-2">Pending</p></td>
                            <td>
                              <div class="d-flex align-items-center gap-1">
                                <p class="mb-0">4.0</p>
                                <i class="material-icons-outlined text-warning fs-6">star</i>
                              </div>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <div class="d-flex align-items-center gap-3">
                                 <div class="">
                                    <img src="/adminHomeAssets/images/top-products/04.png" class="rounded-circle" width="50" height="50" alt="">
                                 </div>
                                 <p class="mb-0">Blue Jeans Casual</p>
                              </div>
                            </td>
                            <td>$289</td>
                            <td>Julia Sunota</td>
                            <td><p class="dash-lable mb-0 bg-success bg-opacity-10 text-success rounded-2">Completed</p></td>
                            <td>
                              <div class="d-flex align-items-center gap-1">
                                <p class="mb-0">3.0</p>
                                <i class="material-icons-outlined text-warning fs-6">star</i>
                              </div>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <div class="d-flex align-items-center gap-3">
                                 <div class="">
                                    <img src="/adminHomeAssets/images/top-products/06.png" class="rounded-circle" width="50" height="50" alt="">
                                 </div>
                                 <p class="mb-0">Fancy Shirts</p>
                              </div>
                            </td>
                            <td>$389</td>
                            <td>Julia Sunota</td>
                            <td><p class="dash-lable mb-0 bg-danger bg-opacity-10 text-danger rounded-2">Canceled</p></td>
                            <td>
                              <div class="d-flex align-items-center gap-1">
                                <p class="mb-0">2.0</p>
                                <i class="material-icons-outlined text-warning fs-6">star</i>
                              </div>
                            </td>
                          </tr>

                        </tbody>
                     </table>
                 </div>
              </div>
            </div>
          </div> -->
        </div>



    </div>
  </main>
  <!--end main wrapper-->

  <!--start overlay-->
     <div class="overlay btn-toggle"></div>
  <!--end overlay-->

  <%- include('../layouts/adminFooter.ejs') %>
    
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

   <!-- Chart.js Script -->
   <script>
   
    var yearlyData = [55, 49, 44, 24, 15];
    var monthlyData = [5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60];
    var weeklyData = [12, 19, 3, 5, 2, 3, 7];
    var dailyData = []; 

    var barColors = ["red", "green", "blue", "orange", "brown"];

     
    var myChart = new Chart("myChart", {
        type: "bar",
        data: {
            labels: [],  
            datasets: [{
                backgroundColor: barColors,
                data: []  
            }]
        },
        options: {
            title: {
                display: true,
                text: "Sales Report - Delivered Orders"
            }
        }
    });

   
    function updateChart() {
        var filter = document.getElementById("filter").value;
        var dateRangeContainer = document.getElementById("dateRangeContainer");

        if (filter === "yearly") {
            myChart.data.labels = ["Italy", "France", "Spain", "USA", "Argentina"];
            myChart.data.datasets[0].data = yearlyData;
            myChart.options.title.text = "Sales Report - Yearly";
            dateRangeContainer.style.display = "none";
        } else if (filter === "monthly") {
            myChart.data.labels = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
            myChart.data.datasets[0].data = monthlyData;
            myChart.options.title.text = "Sales Report - Monthly";
            dateRangeContainer.style.display = "none";
        } else if (filter === "weekly") {
            myChart.data.labels = ["Week 1", "Week 2", "Week 3", "Week 4", "Week 5", "Week 6", "Week 7"];
            myChart.data.datasets[0].data = weeklyData;
            myChart.options.title.text = "Sales Report - Weekly";
            dateRangeContainer.style.display = "none";
        } else if (filter === "daily") {
            dateRangeContainer.style.display = "block";

            var startDate = document.getElementById("startDate").value;
            var endDate = document.getElementById("endDate").value;

            if (startDate && endDate) {
                var daysArray = generateDateLabels(startDate, endDate);
                var dataArray = daysArray.map(() => Math.floor(Math.random() * 100));  
                myChart.data.labels = daysArray;
                myChart.data.datasets[0].dat = "Sales Report - Daily (" + startDate + " to " + endDate + ")";
            }
        }

        myChart.update();  
    }

    function generateDateLabels(start, end) {
        var startDate = new Date(start);
        var endDate = new Date(end);
        var dateArray = [];

        while (startDate <= endDate) {
            var day = startDate.getDate();
            var month = startDate.getMonth() + 1;  
            var year = startDate.getFullYear();
            dateArray.push(`${day}-${month}-${year}`);
            startDate.setDate(startDate.getDate() + 1);  
        }

        return dateArray;
    }
</script>


<script type="text/javascript">
  const orderData = JSON.parse('<%- orderData %>');
  
 
  function processYearlyData(data) {
      const yearlyData = {};
      data.forEach(order => {
          const year = new Date(order.date).getFullYear();
          yearlyData[year] = (yearlyData[year] || 0) + order.totalPrice;
      });
      return Object.entries(yearlyData).map(([year, total]) => ({ label: year, value: total }));
  }
  
  function processMonthlyData(data) {
      const monthlyData = {};
      data.forEach(order => {
          const date = new Date(order.date);
          const monthYear = `${date.getMonth() + 1}-${date.getFullYear()}`;
          monthlyData[monthYear] = (monthlyData[monthYear] || 0) + order.totalPrice;
      });
      return Object.entries(monthlyData).map(([monthYear, total]) => ({ label: monthYear, value: total }));
  }
  
  function processWeeklyData(data) {
  }
  
  function processDailyData(data, startDate, endDate) {
      const dailyData = {};
      const start = new Date(startDate);
      const end = new Date(endDate);
  
      data.forEach(order => {
          const orderDate = new Date(order.date);
          if (orderDate >= start && orderDate <= end) {
              const dateString = orderDate.toISOString().split('T')[0];
              dailyData[dateString] = (dailyData[dateString] || 0) + order.totalPrice;
          }
      });
  
      return Object.entries(dailyData).map(([date, total]) => ({ label: date, value: total }));
  }
  
  function updateChart() {
      const filter = document.getElementById("filter").value;
      const dateRangeContainer = document.getElementById("dateRangeContainer");
      let chartData;
  
      if (filter === "yearly") {
          chartData = processYearlyData(orderData);
          myChart.options.title.text = "Sales Report - Yearly";
          dateRangeContainer.style.display = "none";
      } else if (filter === "monthly") {
          chartData = processMonthlyData(orderData);
          myChart.options.title.text = "Sales Report - Monthly";
          dateRangeContainer.style.display = "none";
      } else if (filter === "weekly") {
          chartData = processWeeklyData(orderData);
          myChart.options.title.text = "Sales Report - Weekly";
          dateRangeContainer.style.display = "none";
      } else if (filter === "daily") {
          dateRangeContainer.style.display = "block";
          const startDate = document.getElementById("startDate").value;
          const endDate = document.getElementById("endDate").value;
          if (startDate && endDate) {
              chartData = processDailyData(orderData, startDate, endDate);
              myChart.options.title.text = `Sales Report - Daily (${startDate} to ${endDate})`;
          }
      }
  
      if (chartData) {
          myChart.data.labels = chartData.map(item => item.label);
          myChart.data.datasets[0].data = chartData.map(item => item.value);
          myChart.update();
      }
  }
  
  var myChart = new Chart("myChart", {
      type: "bar",
      data: {
          labels: [],
          datasets: [{
              backgroundColor: ["red", "green", "blue", "orange", "brown"],
              data: []
          }]
      },
      options: {
          title: {
              display: true,
              text: "Sales Report - Delivered Orders"
          }
      }
  });
  
  updateChart();
  
  document.getElementById("filter").addEventListener("change", updateChart);
  document.getElementById("startDate").addEventListener("change", updateChart);
  document.getElementById("endDate").addEventListener("change", updateChart);
  </script>

 

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>


<!-- toppppp productsssssssssss -->

<script>
  async function loadTopSellingProducts() {
    try {
      const response = await fetch('/api/reports/top-products');
      const data = await response.json();
      
      const productTableBody = document.getElementById('product-table-body');
      productTableBody.innerHTML = '';  

      if (data.products && data.products.length) {
        data.products.forEach((product, index) => {
          const tr = document.createElement('tr');
          
         
          tr.innerHTML = `
            <td>${index + 1}</td>
            <td>${product.name}</td>
            <td>${product.brand}</td>
            <td>${product.category}</td>
            <td>${product.price.toFixed(2)}</td>
            <td>${product.sold}</td>
          `;
          
          productTableBody.appendChild(tr);  
        });
      } else {
        const tr = document.createElement('tr');
        tr.innerHTML = '<td colspan="6" class="text-center">No data available</td>';
        productTableBody.appendChild(tr);
      }
    } catch (error) {
      console.error('Error fetching top products:', error);
      const productTableBody = document.getElementById('product-table-body');
      productTableBody.innerHTML = '<tr><td colspan="6" class="text-center">Failed to load data</td></tr>';
    }
  }

  window.onload = function() {
    loadTopSellingProducts();
  };
</script>


<!-- topppppppppppp -->
<script>
  function populateTopProductsTable(topProducts) {
    const productTableBody = document.getElementById('product-table-body');
    productTableBody.innerHTML = '';

    if (topProducts && topProducts.length) {
      topProducts.forEach((product, index) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${index + 1}</td>
          <td>${product.name}</td>
          <td>${product.brand}</td>
          <td>${product.category}</td>
          <td>${product.price.toFixed(2)}</td>
          <td>${product.sold}</td>
        `;
        productTableBody.appendChild(tr);
      });
    } else {
      const tr = document.createElement('tr');
      tr.innerHTML = '<td colspan="6" class="text-center">No data available</td>';
      productTableBody.appendChild(tr);
    }
  }

  function populateTopCategoriesTable(topCategories) {
    const categoryTableBody = document.getElementById('category-table-body');
    categoryTableBody.innerHTML = '';

    if (topCategories && topCategories.length) {
      topCategories.forEach((category, index) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${index + 1}</td>
          <td>${category.name}</td>
          <td>${category.sold}</td>
        `;
        categoryTableBody.appendChild(tr);
      });
    } else {
      const tr = document.createElement('tr');
      tr.innerHTML = '<td colspan="3" class="text-center">No data available</td>';
      categoryTableBody.appendChild(tr);
    }
  }

 
  function populateTopBrandsTable(topBrands) {
    const brandTableBody = document.getElementById('brand-table-body');
    brandTableBody.innerHTML = '';

    if (topBrands && topBrands.length) {
      topBrands.forEach((brand, index) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td>${index + 1}</td>
          <td>${brand.name}</td>
          <td>${brand.sold}</td>
        `;
        brandTableBody.appendChild(tr);
      });
    } else {
      const tr = document.createElement('tr');
      tr.innerHTML = '<td colspan="3" class="text-center">No data available</td>';
      brandTableBody.appendChild(tr);
    }
  }

 
  window.onload = function() {
    const topProductsData = <%- topProducts %>;
    const topCategoriesData = <%- topCategories %>;
    const topBrandsData = <%- topBrands %>;

    populateTopProductsTable(topProductsData);
    populateTopCategoriesTable(topCategoriesData);
    populateTopBrandsTable(topBrandsData);

  };
</script>